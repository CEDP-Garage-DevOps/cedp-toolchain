
---
inputs:
  - type: git
    branch: tekton
    service: ${GIT_REPO}
    path: .tekton
#   - type: git
#     branch: master
#     service: ${TEKTON_CATALOG_REPO}
#     path: git
triggers:
  - type: git
    name: commit-push
    eventListener: listner
    service: ${GIT_REPO}
    branch: ${INPUT_GIT_BRANCH}
    events: { "push": true }
  - type: manual
    name: manual-run
    eventListener: manual-run
    properties: []
properties:
- name: DESTINATION
  value: '{{form.pipeline.parameters.destination}}'
  type: text
- name: DOCKER_IMAGE_NAME
  value: '{{form.pipeline.parameters.dockerImageName}}'
  type: text
- name: IBM_CLOUD_API_KEY
  value: '{{form.pipeline.parameters.api-key}}'
  type: secure
- name: DOCKER_USERNAME
  value: 'iamapikey'
  type: text
- name: DOCKER_PASSWORD
  value: '{{form.pipeline.parameters.api-key}}'
  type: secure
- name: dockerconfigjson
  value: '{{form.pipeline.parameters.dockerconfigjson}}'
  type: secure
- name: REGISTRY_REGION_ID
  value: '{{form.pipeline.parameters.registry-region}}'
  type: text
- name: CLUSTER
  value: '{{form.pipeline.parameters.cluster}}'
  type: text
- name: DOMAIN
  value: '{{form.pipeline.parameters.domain}}'
  type: text
- name: EXTERNAL_IP
  value: '{{form.pipeline.parameters.externalIP}}'
  type: text
- name: INPUT_GIT_BRANCH 
  value: '{{form.pipeline.parameters.INPUT_GIT_BRANCH}}'
  type: text
# - name: GIT_REPO 
#   value: 'https://github.ibm.com/CEDP-Garage/cedp-garage-pipelines.git'
#   type: text
- name: VERSIONS_GIT_BRANCH 
  value: '{{form.pipeline.parameters.VERSIONS_GIT_BRANCH}}'
  type: text
- name: VERDACCIO_URL
  value: '{{form.pipeline.parameters.VERDACCIO_URL}}'
  type: text
- name: VERDACCIO_USER 
  value: '{{form.pipeline.parameters.VERDACCIO_USER}}'
  type: text
- name: VERDACCIO_PASSWORD 
  value: '{{form.pipeline.parameters.VERDACCIO_PASSWORD}}'
  type: secure
- name: ARTIFACTORY_USER
  value: '{{form.pipeline.parameters.ARTIFACTORY_USER}}'
  type: text
- name: ARTIFACTORY_APIKEY 
  value: '{{form.pipeline.parameters.ARTIFACTORY_APIKEY}}'
  type: secure
- name: ARTIFACTORY_URL 
  value: '{{form.pipeline.parameters.ARTIFACTORY_URL}}'
  type: text
- name: ICP_USER 
  value: '{{form.pipeline.parameters.ICP_USER}}'
  type: text
- name: ICP_PASSWORD 
  value: '{{form.pipeline.parameters.ICP_PASSWORD}}'
  type: secure
- name: IBMCLOUD_HOME 
  value: '/root'
  type: text
- name: KEY_PROTECT_NAME 
  value: '{{form.pipeline.parameters.key-protect-name}}'
  type: text
- name: DEPLOYMENT_TYPE 
  value: '{{form.pipeline.parameters.deployment-type}}'
  type: text
- name: OS_TOKEN
  value: '{{form.pipeline.parameters.OS_TOKEN}}'
  type: secure
- name: OS_USER
  value: '{{form.pipeline.parameters.OS_USER}}'
  type: text  
- name: CIRRUS_REGISTRY
  value: '{{form.pipeline.parameters.CIRRUS_REGISTRY}}'
  type: text  
- name: CIRRUS_REGISTRY_USER
  value: '{{form.pipeline.parameters.CIRRUS_REGISTRY_USER}}'
  type: text
- name: CIRRUS_REGISTRY_PASSWORD
  value: '{{form.pipeline.parameters.CIRRUS_REGISTRY_PASSWORD}}'
  type: secure 
- name: dockerconfigjson
  value: '{{from.pipeline.parameters.dockerconfigjson}}'
  tpe: secure
- name: GIT_TOKEN
  value: '{{from.pipeline.parameters.GIT_TOKEN}}'
  type: secure  
